<include file="Public:header"/>
<include file="Public:menu"/>
<div class="content-wrapper">
    <include file="Public:breadcrumb"/>

    <!-- 主体内容 -->
    <section class="content">
        <div class="row" style="">
            <!-- left column -->
            <div class="col-md-8" style="">
                <!-- general form elements -->
                <div class="box box-solid" style="">
                    <!-- form start -->
                    <form role="form" id="warForm" method="post" action="{:U('War/add')}">
                        <div class="box-body" style="">

                            <div class="form-group input-group w500">
                                <label>游戏对战名称 <span class="required">*</span></label>
                                <div>
                                    <input name="title" value="" type="text" placeholder="请输入对战名称" class="form-control w200 inline-block">
                                </div>
                            </div>

                            <div class="form-group input-group w500"><!-- has-error-->
                                <label>游戏名称 <span class="required">*</span></label>
                                <div>
                                  <select class="form-control wp50" name="game_id">
                                    <option value="0">≡ 请选择游戏 ≡</option>
                                    <volist name="games" id="vo">
                                      <option value="{$vo.id}">{$vo.title}</option>
                                    </volist>
                                  </select>
                                    <!-- <input name="title" type="text" placeholder="输入游戏标题 ..."
                                           class="form-control w500 inline-block"
                                           value=""> -->
                                    <em class="help-block"></em>
                                </div>
                            </div>

                            <div class="form-group input-group w500"><!-- has-error-->
                                <label>网吧名称 <span class="required">*</span></label>
                                <div>
                                  <select class="form-control wp50" name="netbar_id">
                                    <option value="0">≡ 请选择网吧 ≡</option>
                                    <volist name="netbar" id="vo">
                                      <option value="{$vo.user_id}">{$vo.title}</option>
                                    </volist>
                                  </select>
                                    <!-- <input name="title" type="text" placeholder="输入游戏标题 ..."
                                           class="form-control w500 inline-block"
                                           value=""> -->
                                    <em class="help-block"></em>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>奖金</label>
                                <div>
                                    <input name="money" value="" type="text" placeholder=""
                                           class="form-control w200 inline-block">
                                </div>
                            </div>

                            <div class="form-group">
                                <label>场次</label>
                                <div>
                                    <input name="times" value="" type="text" placeholder=""
                                           class="form-control w200 inline-block">
                                </div>
                            </div>

                            <div class="form-group">
                                <label>人数</label>
                                <div>
                                    <input name="team" value="" type="text" placeholder=""
                                           class="form-control w200 inline-block">
                                </div>
                            </div>

                            <!-- <div class="form-group">
                                <label>最小参与人数</label>
                                <div>
                                    <input name="player_min" value="" type="text" placeholder=""
                                           class="form-control w200 inline-block">
                                </div>
                            </div> -->

                            <div class="form-group">
                                <label  for="">开战时间</label>
                                <!-- <div class="col-sm-6"> -->
                                    <div class="input-group col-sm-6">
                                        <input type="text" placeholder="" name="begin_time" id="end-time" class="form-control"
                                               value="{$endtime}" >
                                               <!-- disabled -->

                                        <div class="input-group-btn">
                                            <button onclick="return selectDate(this, 'end-time')" type="button"
                                                    class="btn btn-success btn-flat"><i class="fa fa-clock-o"></i></button>
                                        </div>
                                    </div>
                                <!-- </div> -->
                            </div>

                            <div class="form-group">
                                <label>规则</label>
                                <textarea name="rule" id="content" class="form-control" rows="6"
                                          placeholder="输入描述 ..."></textarea>
                            </div>
                            <!-- </div> -->

                        </div>

                        <div class="box-footer">
                            <button type="submit" class="btn btn-primary w100">保存</button>
                            <a type="submit" class="btn btn-info w100 ml20"
                               onclick="history.go('-1')">返回</a>
                        </div>

                    </form>

                </div><!-- /.box -->
            </div><!--/.col (left) -->
        </div>
    </section>
    <!-- /.content  -->
</div>

<!--kind editor-->
<!--日期-->
<script	src="{:ASSETS}/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js" type="text/javascript"></script>
<script	src="{:ASSETS}/plugins/bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js"	charset="UTF-8"></script>
<link	href="{:ASSETS}/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet" type="text/css" />

<!-- form validate -->
<script src="{:ASSETS}/plugins/jquery-validate/jquery.validate.min.js"></script>
<script src="{:ASSETS}/plugins/jquery-validate/additional-methods.min.js"></script>


<script type="text/javascript">

    $(function(){
        //验证表单
        $("#warForm").validate({
            rules: {
                title: "required",
                game_id: "required",
                netbar_id: "required",
                war_id: "required"
            },
            messages: {
                username: "请输入游戏对战名称",
                game_id: "请选择游戏",
                netbar_id: "请选择网吧",
                war_id: "请选择比赛"
            },
            errorPlacement: function(error, element) {
                element.parent().addClass('has-error');
            },
            onfocusout: function(element) {
                //this.element(element);
            },
            success: function(label, element){
                $(element).parent().removeClass('has-error');
            }
        });
    });



/**
 * 选择日期
 * @param o 触发按钮
 * @param id 设置时间输入框ID
 */
function selectDate(o, id) {
  var _id = '#' + id;

  $(_id).datetimepicker({
    format : 'yyyy-mm-dd hh:ii:ss',
    language : 'zh-CN',
    todayBtn : true
  }).on("changeDate", function(e) {
    var me = e.target;
    $(this).datetimepicker('hide');
  });

  $(_id).datetimepicker('show');

}
</script>
<include file="Public:footer"/>
